var PersonalDataAll,__bind=function(t,e){return function(){return t.apply(e,arguments)}};PersonalDataAll=function(){function t(){this.checkDate=__bind(this.checkDate,this),this.avatarSelected=__bind(this.avatarSelected,this),this.removeAvatar=__bind(this.removeAvatar,this),this.drop=__bind(this.drop,this),this.step1Submit=__bind(this.step1Submit,this),this.validate=__bind(this.validate,this),this.newSubject=__bind(this.newSubject,this),this.checkFormat=__bind(this.checkFormat,this),this.step2Back=__bind(this.step2Back,this),this.step2Submit=__bind(this.step2Submit,this),this.newAddress=__bind(this.newAddress,this),this.step3Back=__bind(this.step3Back,this),this.step3Submit=__bind(this.step3Submit,this),this.step4Back=__bind(this.step4Back,this),this.step4Submit=__bind(this.step4Submit,this),this.newEducation=__bind(this.newEducation,this);var t,e,s;if(this.widget=$(".registration-steps"),0===this.widget.length)throw new Error("не найден виджет");this.steps=this.widget.find(".steps"),this.panels=this.widget.find(".panel"),this.current=this.widget.find(".panel.current"),this.step1=this.widget.find(".panel.step-1"),this.step2=this.widget.find(".panel.step-2"),this.step3=this.widget.find(".panel.step-3"),this.step4=this.widget.find(".panel.step-4"),this.step5=this.widget.find(".panel.step-5"),e=$("select"),e.length>0&&e.chosen({disable_search_threshold:30}),this.step1.h5Validate(),this.file=this.step1.find("#registration-avatar"),this.avatarTemplate=document.getElementById("current-avatar-template"),this.fileSelector=this.step1.find(".file-selector"),FileAPI.event.on(this.file[0],"change",this.avatarSelected),this.fileSelector.dnd(this.over,this.drop),FileAPI.event.on(document,"drop",this.droped),t=$("#experience"),t.length>0&&(t.noUiSlider({step:1,connect:"lower",start:0,range:{min:[0],max:[50]},format:wNumb({decimals:0})}),t.Link("lower").to($("#experience-value"))),this.month=this.step1.find(".month select"),this.year=this.step1.find(".year select"),this.day=this.step1.find("input.day"),this.day.on("change",this.checkDate),this.month.on("change",this.checkDate),this.year.on("change",this.checkDate),this.step1.find('button[type="submit"]').on("click",this.step1Submit),this.step2.h5Validate(),this.duration_value=$("#duration-value"),s=$("#duration"),s.length>0&&(s.noUiSlider({step:5,connect:"lower",start:0,range:{min:[30],max:[180]},format:wNumb({decimals:0})}),s.Link("lower").to(this.duration_value),s.on("change",function(){return function(t,e){return $("strong.min-time").text(e)}}(this))),this.formats=this.step2.find(".lessons-format"),this.formats.find("input").on("change",this.checkFormat),this.checkFormat(),this.add_subject=this.step2.find(".add-subject"),this.subj_count=0,this.subject_source=$("#subj-template").html(),this.subject_source=Handlebars.compile(this.subject_source),this.add_subject.on("click",this.newSubject),this.add_subject.trigger("click"),this.step2.find('button[type="submit"]').on("click",this.step2Submit),this.step2.find("a.previous").on("click",this.step2Back),this.step3.h5Validate(),this.add_address=this.step3.find(".add-address"),this.address_count=0,this.address_source=$("#address-template").html(),this.address_source=Handlebars.compile(this.address_source),this.add_address.on("click",this.newAddress),this.add_address.trigger("click"),this.step3.find('button[type="submit"]').on("click",this.step3Submit),this.step3.find("a.previous").on("click",this.step3Back),this.step4.h5Validate(),this.add_education=this.step4.find(".add-education"),this.education_count=0,this.education_source=$("#education-template").html(),this.education_source=Handlebars.compile(this.education_source),this.add_education.on("click",this.newEducation),this.add_education.trigger("click"),this.sertificat_source=$("#sertificat-template").html(),this.sertificat_source=Handlebars.compile(this.sertificat_source),this.cert_list=this.step4.find(".sertificat-list"),this.cerificates_count=0,this.sertificats=this.step4.find(".sertificats"),this.sertificats.fileapi({url:"http://test.silentimp.info/test.php",duplicate:!1,accept:"image/*",maxSize:5*FileAPI.MB,autoUpload:!1,multiple:!0,onSelect:function(t){return function(e,s){var i;return t.cerificates_count++,i=new FileReader,i.onload=function(e){return t.cert_list.append(t.sertificat_source({id:t.cerificates_count,src:e.target.result}))},i.readAsDataURL(s.files[0])}}(this),elements:{ctrl:{upload:".add-sertificat label"},list:".sertificat-list"}}),this.step4.find('button[type="submit"]').on("click",this.step4Submit),this.step4.find("a.previous").on("click",this.step4Back)}return t.prototype.newEducation=function(t){return t.preventDefault(),this.add_education.before(this.education_source({index:this.education_count})),this.education_count++,this.step4.find("select:visible").chosen({disable_search_threshold:30})},t.prototype.step4Submit=function(t){var e,s,i,r;for(t.preventDefault(),s=this.step4.find(":input"),i=0,r=s.length;r>i;i++)if(e=s[i],!this.validate(e))return!1;return this.step4.find(".ui-state-error").length>0?!1:(this.current=this.current.removeClass("current").next(),this.current.addClass("current"))},t.prototype.step4Back=function(t){return t.preventDefault(),this.steps.find(".selected.step:last").removeClass("selected"),this.current=this.current.removeClass("current").prev(),this.current.addClass("current")},t.prototype.step3Submit=function(t){var e,s,i,r;for(t.preventDefault(),s=this.step3.find(":input"),i=0,r=s.length;r>i;i++)if(e=s[i],!this.validate(e))return!1;return this.step3.find(".ui-state-error").length>0?!1:(this.steps.find(".selected.step:last").next().addClass("selected"),this.current=this.current.removeClass("current").next(),this.current.addClass("current"))},t.prototype.step3Back=function(t){return t.preventDefault(),this.steps.find(".selected.step:last").removeClass("selected"),this.current=this.current.removeClass("current").prev(),this.current.addClass("current")},t.prototype.newAddress=function(t){return t.preventDefault(),this.add_address.before(this.address_source({index:this.address_count})),this.address_count++,this.step3.find("select:visible").chosen({disable_search_threshold:30})},t.prototype.step2Submit=function(t){var e,s,i,r;for(t.preventDefault(),s=this.step2.find(":input"),i=0,r=s.length;r>i;i++)if(e=s[i],!this.validate(e))return!1;return this.step2.find(".ui-state-error").length>0?!1:(this.steps.find(".selected.step:last").next().addClass("selected"),this.current=this.current.removeClass("current").next(),this.current.addClass("current"))},t.prototype.step2Back=function(t){return t.preventDefault(),this.steps.find(".selected.step:last").removeClass("selected"),this.current=this.current.removeClass("current").prev(),this.current.addClass("current")},t.prototype.checkFormat=function(){var t,e,s,i,r,n,a,c;for(i=this.formats.find("input"),c=[],n=0,a=i.length;a>n;n++)s=i[n],e=this.step2.find("input."+s.getAttribute("data-price-field")),c.push(function(){var i,n,a;for(a=[],i=0,n=e.length;n>i;i++)t=e[i],r=$(t).closest(".subdevision"),s.checked?(r.removeClass("hide"),t.removeAttribute("disabled"),a.push(t.setAttribute("required","required"))):(r.addClass("hide"),t.classList.remove("ui-state-error"),t.setAttribute("disabled","disabled"),a.push(t.removeAttribute("required")));return a}());return c},t.prototype.newSubject=function(t){var e,s,i,r,n;for(t.preventDefault(),this.add_subject.before(this.subject_source({index:this.subj_count})),this.subj_count++,this.step2.find("select:visible").chosen({disable_search_threshold:30}),this.step2.find(".min-time").text(this.duration_value.val()),this.checkFormat(),r=this.step2.find(".dropdown-container-widget"),n=[],s=0,i=r.length;i>s;s++)e=r[s],n.push(new DropdownWidgetController($(e)));return n},t.prototype.validate=function(t){var e;return t.hasAttribute("data-h5-errorid")&&(e=document.getElementById(t.getAttribute("data-h5-errorid"))),t.hasAttribute("required")&&0===t.value.trim().length&&t.classList.add("ui-state-error"),t.classList.contains("ui-state-error")?(e&&(e.style.display="block"),!1):(e&&(e.style.display="none"),!0)},t.prototype.step1Submit=function(t){var e,s,i,r;for(t.preventDefault(),s=this.step1.find(":input"),i=0,r=s.length;r>i;i++)if(e=s[i],!this.validate(e))return!1;return this.step1.find(".ui-state-error").length>0?!1:(this.steps.find(".selected.step:last").next().addClass("selected"),this.current=this.current.removeClass("current").next(),this.current.addClass("current"))},t.prototype.droped=function(t){return t.preventDefault(),FileAPI.getDropFiles(t,function(){})},t.prototype.over=function(){},t.prototype.drop=function(t){var e;return console.log(t),t.length?(e=new FileReader,e.onload=function(t){return function(e){var s,i;return t.avatarTemplate.content.querySelector("img").src=e.target.result,s=document.importNode(t.avatarTemplate.content,!0),i=t.fileSelector.prev(),i.hasClass("current-avatar")&&i.remove(),t.fileSelector.before(s),t.fileSelector.prev().find(".close").on("click",t.removeAvatar)}}(this),e.readAsDataURL(t[0])):void 0},t.prototype.removeAvatar=function(t){return t.preventDefault(),this.fileSelector.prev().remove(),this.file.replaceWith(this.file.val("").clone(!0)),this.file=this.step1.find("#registration-avatar")},t.prototype.avatarSelected=function(t){var e,s,i;return s=FileAPI.getFiles(t),e=s[0].name.substring(s[0].name.lastIndexOf(".")+1).toLowerCase(),s[0]&&s[0].size<=FileAPI.MB&&("gif"===e||"png"===e||"jpeg"===e||"jpg"===e)?(i=new FileReader,i.onload=function(t){return function(e){var s,i;return t.avatarTemplate.content.querySelector("img").src=e.target.result,s=document.importNode(t.avatarTemplate.content,!0),i=t.fileSelector.prev(),i.hasClass("current-avatar")&&i.remove(),t.fileSelector.before(s),t.fileSelector.prev().find(".close").on("click",t.removeAvatar)}}(this),i.readAsDataURL(s[0])):(this.fileSelector.prev().remove(),this.file.replaceWith(this.file.val("").clone(!0)),this.file=this.step1.find("#registration-avatar"))},t.prototype.checkDate=function(){var t,e;return t=parseInt(this.day.val().trim(),10),1>t||isNaN(t)?void this.day.val(1):(e=parseInt(moment(this.year.val()+"-"+(parseInt(this.month.val(),10)+1),"YYYY-MM").daysInMonth(),10),void(t>e&&this.day.val(e)))},t}(),$(document).ready(function(){return new PersonalDataAll});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlBlcnNvbmFsRGF0YUFsbC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQSxpQkFBQSxPQUFBLFNBQUEsRUFBQSxHQUFBLE1BQUEsWUFBQSxNQUFBLEdBQUEsTUFBQSxFQUFBLFlBQUEsaUJBQUEsV0FDZSxRQUFBLEtBQ1gsS0FBQSxVQUFBLE9BQUEsS0FBQSxVQUFBLE1BQUEsS0FBQSxlQUFBLE9BQUEsS0FBQSxlQUFBLE1BQUEsS0FBQSxhQUFBLE9BQUEsS0FBQSxhQUFBLE1BQUEsS0FBQSxLQUFBLE9BQUEsS0FBQSxLQUFBLE1BQUEsS0FBQSxZQUFBLE9BQUEsS0FBQSxZQUFBLE1BQUEsS0FBQSxTQUFBLE9BQUEsS0FBQSxTQUFBLE1BQUEsS0FBQSxXQUFBLE9BQUEsS0FBQSxXQUFBLE1BQUEsS0FBQSxZQUFBLE9BQUEsS0FBQSxZQUFBLE1BQUEsS0FBQSxVQUFBLE9BQUEsS0FBQSxVQUFBLE1BQUEsS0FBQSxZQUFBLE9BQUEsS0FBQSxZQUFBLE1BQUEsS0FBQSxXQUFBLE9BQUEsS0FBQSxXQUFBLE1BQUEsS0FBQSxVQUFBLE9BQUEsS0FBQSxVQUFBLE1BQUEsS0FBQSxZQUFBLE9BQUEsS0FBQSxZQUFBLE1BQUEsS0FBQSxVQUFBLE9BQUEsS0FBQSxVQUFBLE1BQUEsS0FBQSxZQUFBLE9BQUEsS0FBQSxZQUFBLE1BQUEsS0FBQSxhQUFBLE9BQUEsS0FBQSxhQUFBLEtBQUEsSUFBQSxHQUFBLEVBQUEsQ0FDQSxJQURBLEtBQUMsT0FBUyxFQUFFLHVCQUNTLElBQWxCLEtBQUMsT0FBTyxPQUNULEtBQVUsSUFBQSxPQUFNLG1CQUVsQixNQUFDLE1BQVEsS0FBQyxPQUFPLEtBQUssVUFDdEIsS0FBQyxPQUFTLEtBQUMsT0FBTyxLQUFLLFVBQ3ZCLEtBQUMsUUFBVSxLQUFDLE9BQU8sS0FBSyxrQkFFeEIsS0FBQyxNQUFRLEtBQUMsT0FBTyxLQUFLLGlCQUN0QixLQUFDLE1BQVEsS0FBQyxPQUFPLEtBQUssaUJBQ3RCLEtBQUMsTUFB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R0FBQSxHQUFBLENBRUEsT0FGQSxHQUFNLFNBQVMsS0FBQyxJQUFJLE1BQU0sT0FBUSxJQUUzQixFQUFKLEdBQVMsTUFBTSxPQUNoQixNQUFDLElBQUksSUFBSSxJQUdYLEVBQU8sU0FBUyxPQUFPLEtBQUMsS0FBSyxNQUFNLEtBQUssU0FBUyxLQUFDLE1BQU0sTUFBTSxJQUFJLEdBQUksV0FBVyxjQUFlLFNBQzdGLEVBQUksR0FDTCxLQUFDLElBQUksSUFBSSxXQTNhZixFQWliRSxVQUFVLE1BQU0saUJBQ1osSUFBQSIsImZpbGUiOiJQZXJzb25hbERhdGFBbGwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBQZXJzb25hbERhdGFBbGxcbiAgY29uc3RydWN0b3I6IC0+XG4gICAgQHdpZGdldCA9ICQgJy5yZWdpc3RyYXRpb24tc3RlcHMnXG4gICAgaWYgQHdpZGdldC5sZW5ndGggPT0gMFxuICAgICAgdGhyb3cgbmV3IEVycm9yKCfQvdC1INC90LDQudC00LXQvSDQstC40LTQttC10YInKVxuXG4gICAgQHN0ZXBzID0gQHdpZGdldC5maW5kICcuc3RlcHMnXG4gICAgQHBhbmVscyA9IEB3aWRnZXQuZmluZCAnLnBhbmVsJ1xuICAgIEBjdXJyZW50ID0gQHdpZGdldC5maW5kICcucGFuZWwuY3VycmVudCdcblxuICAgIEBzdGVwMSA9IEB3aWRnZXQuZmluZCAnLnBhbmVsLnN0ZXAtMSdcbiAgICBAc3RlcDIgPSBAd2lkZ2V0LmZpbmQgJy5wYW5lbC5zdGVwLTInXG4gICAgQHN0ZXAzID0gQHdpZGdldC5maW5kICcucGFuZWwuc3RlcC0zJ1xuICAgIEBzdGVwNCA9IEB3aWRnZXQuZmluZCAnLnBhbmVsLnN0ZXAtNCdcbiAgICBAc3RlcDUgPSBAd2lkZ2V0LmZpbmQgJy5wYW5lbC5zdGVwLTUnXG5cbiAgICAjINCe0LHRidC10LVcbiAgICBzZWxlY3QgPSAkICdzZWxlY3QnXG4gICAgaWYgc2VsZWN0Lmxlbmd0aCA+IDBcbiAgICAgIHNlbGVjdC5jaG9zZW5cbiAgICAgICAgZGlzYWJsZV9zZWFyY2hfdGhyZXNob2xkOiAzMFxuXG4gICAgIyDQqNCw0LMgMVxuXG4gICAgIyDQn9GA0L7QstC10YDQutCwINC/0L7Qu9C10Lkg0LLQstC+0LTQsFxuICAgIEBzdGVwMS5oNVZhbGlkYXRlKClcblxuICAgICMg0JfQsNCz0YDRg9C30LrQsCDQsNCy0LDRgtCw0YDQsFxuICAgIEBmaWxlID0gQHN0ZXAxLmZpbmQgJyNyZWdpc3RyYXRpb24tYXZhdGFyJ1xuICAgIEBhdmF0YXJUZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkICdjdXJyZW50LWF2YXRhci10ZW1wbGF0ZSdcbiAgICBAZmlsZVNlbGVjdG9yID0gQHN0ZXAxLmZpbmQgJy5maWxlLXNlbGVjdG9yJ1xuICAgIFxuICAgIEZpbGVBUEkuZXZlbnQub24gQGZpbGVbMF0sICdjaGFuZ2UnLCBAYXZhdGFyU2VsZWN0ZWRcbiAgICBAZmlsZVNlbGVjdG9yLmRuZCBAb3ZlciwgQGRyb3BcbiAgICBGaWxlQVBJLmV2ZW50Lm9uIGRvY3VtZW50LCAnZHJvcCcsIEBkcm9wZWRcblxuICAgICMg0J/QvtC70LfRg9C90L7QuiDQvtC/0YvRgtCwXG4gICAgZXhwID0gJCAnI2V4cGVyaWVuY2UnXG4gICAgaWYgZXhwLmxlbmd0aCA+IDBcbiAgICAgIGV4cC5ub1VpU2xpZGVyXG4gICAgICAgIHN0ZXA6IDEsXG4gICAgICAgIGNvbm5lY3Q6IFwibG93ZXJcIixcbiAgICAgICAgc3RhcnQ6IDAsXG4gICAgICAgIHJhbmdlOlxuICAgICAgICAgICdtaW4nOiBbMF0sXG4gICAgICAgICAgJ21heCc6IFs1MF1cbiAgICAgICAgZm9ybWF0OiB3TnVtYlxuICAgICAgICAgIGRlY2ltYWxzOiAwXG4gICAgICBleHAuTGluaygnbG93ZXInKS50bygkKCcjZXhwZXJpZW5jZS12YWx1ZScpKVxuXG4gICAgIyDQlNCw0YLQsCDRgNC+0LbQtNC10L3QuNGPXG4gICAgQG1vbnRoID0gQHN0ZXAxLmZpbmQgJy5tb250aCBzZWxlY3QnXG4gICAgQHllYXIgID0gQHN0ZXAxLmZpbmQgJy55ZWFyIHNlbGVjdCdcbiAgICBAZGF5ICAgPSBAc3RlcDEuZmluZCAnaW5wdXQuZGF5J1xuICAgIEBkYXkub24gICAnY2hhbmdlJywgQGNoZWNrRGF0ZVxuICAgIEBtb250aC5vbiAnY2hhbmdlJywgQGNoZWNrRGF0ZVxuICAgIEB5ZWFyLm9uICAnY2hhbmdlJywgQGNoZWNrRGF0ZVxuXG4gICAgIyDQntGC0L/RgNCw0LLQutCwINC00LDQvdC90YvRhSDQqNCw0LMgMVxuICAgIEBzdGVwMS5maW5kKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpLm9uICdjbGljaycsIEBzdGVwMVN1Ym1pdFxuXG5cbiAgICAjINCo0LDQsyAyXG4gICAgIyDQn9GA0L7QstC10YDQutCwINC/0L7Qu9C10Lkg0LLQstC+0LTQsFxuICAgIEBzdGVwMi5oNVZhbGlkYXRlKClcblxuICAgICMg0J/QvtC70LfRg9C90L7QuiDQtNC70LjRgtC10LvRjNC90L7RgdGC0Lgg0LfQsNC90Y/RgtC40LlcbiAgICBAZHVyYXRpb25fdmFsdWUgPSAkKCcjZHVyYXRpb24tdmFsdWUnKVxuXG4gICAgdGltZSA9ICQgJyNkdXJhdGlvbidcbiAgICBpZiB0aW1lLmxlbmd0aCA+IDBcbiAgICAgIHRpbWUubm9VaVNsaWRlclxuICAgICAgICBzdGVwOiA1LFxuICAgICAgICBjb25uZWN0OiBcImxvd2VyXCIsXG4gICAgICAgIHN0YXJ0OiAwLFxuICAgICAgICByYW5nZTpcbiAgICAgICAgICAnbWluJzogWzMwXSxcbiAgICAgICAgICAnbWF4JzogWzE4MF1cbiAgICAgICAgZm9ybWF0OiB3TnVtYlxuICAgICAgICAgIGRlY2ltYWxzOiAwXG5cbiAgICAgIFxuICAgICAgdGltZS5MaW5rKCdsb3dlcicpLnRvKEBkdXJhdGlvbl92YWx1ZSlcbiAgICAgIHRpbWUub24gJ2NoYW5nZScsIChldmVudCwgdWkpPT5cbiAgICAgICAgJCgnc3Ryb25nLm1pbi10aW1lJykudGV4dCh1aSlcblxuICAgICMg0KTQvtGA0LzQsNGCINC30LDQvdGP0YLQuNC5XG4gICAgQGZvcm1hdHMgPSBAc3RlcDIuZmluZCAnLmxlc3NvbnMtZm9ybWF0J1xuICAgIEBmb3JtYXRzLmZpbmQoJ2lucHV0Jykub24gJ2NoYW5nZScsIEBjaGVja0Zvcm1hdFxuICAgIEBjaGVja0Zvcm1hdCgpXG5cbiAgICAj0JTQvtCx0LDQstC60LAg0L/RgNC10LTQvNC10YLQsFxuICAgIEBhZGRfc3ViamVjdCA9IEBzdGVwMi5maW5kICcuYWRkLXN1YmplY3QnXG4gICAgQHN1YmpfY291bnQgPSAwXG4gICAgQHN1YmplY3Rfc291cmNlID0gJChcIiNzdWJqLXRlbXBsYXRlXCIpLmh0bWwoKVxuICAgIEBzdWJqZWN0X3NvdXJjZSA9IEhhbmRsZWJhcnMuY29tcGlsZSBAc3ViamVjdF9zb3VyY2VcbiAgICBAYWRkX3N1YmplY3Qub24gJ2NsaWNrJywgQG5ld1N1YmplY3RcbiAgICBAYWRkX3N1YmplY3QudHJpZ2dlciAnY2xpY2snXG5cbiAgICBAc3RlcDIuZmluZCgnYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKS5vbiAnY2xpY2snLCBAc3RlcDJTdWJtaXRcbiAgICBAc3RlcDIuZmluZCgnYS5wcmV2aW91cycpLm9uICdjbGljaycsIEBzdGVwMkJhY2tcblxuXG4gICAgIyDQqNCw0LMgM1xuICAgICMg0J/RgNC+0LLQtdGA0LrQsCDQv9C+0LvQtdC5INCy0LLQvtC00LBcbiAgICBAc3RlcDMuaDVWYWxpZGF0ZSgpXG5cbiAgICAj0JTQvtCx0LDQstC60LAg0L/RgNC10LTQvNC10YLQsFxuICAgIEBhZGRfYWRkcmVzcyA9IEBzdGVwMy5maW5kICcuYWRkLWFkZHJlc3MnXG4gICAgQGFkZHJlc3NfY291bnQgPSAwXG4gICAgQGFkZHJlc3Nfc291cmNlID0gJChcIiNhZGRyZXNzLXRlbXBsYXRlXCIpLmh0bWwoKVxuICAgIEBhZGRyZXNzX3NvdXJjZSA9IEhhbmRsZWJhcnMuY29tcGlsZSBAYWRkcmVzc19zb3VyY2VcbiAgICBAYWRkX2FkZHJlc3Mub24gJ2NsaWNrJywgQG5ld0FkZHJlc3NcbiAgICBAYWRkX2FkZHJlc3MudHJpZ2dlciAnY2xpY2snXG5cbiAgICBAc3RlcDMuZmluZCgnYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKS5vbiAnY2xpY2snLCBAc3RlcDNTdWJtaXRcbiAgICBAc3RlcDMuZmluZCgnYS5wcmV2aW91cycpLm9uICdjbGljaycsIEBzdGVwM0JhY2tcblxuICAgICMg0KjQsNCzIDRcbiAgICAjINCf0YDQvtCy0LXRgNC60LAg0L/QvtC70LXQuSDQstCy0L7QtNCwXG4gICAgQHN0ZXA0Lmg1VmFsaWRhdGUoKVxuXG4gICAgI9CU0L7QsdCw0LLQutCwINC+0LHRgNCw0LfQvtCy0LDQvdC40Y9cbiAgICBAYWRkX2VkdWNhdGlvbiA9IEBzdGVwNC5maW5kICcuYWRkLWVkdWNhdGlvbidcbiAgICBAZWR1Y2F0aW9uX2NvdW50ID0gMFxuICAgIEBlZHVjYXRpb25fc291cmNlID0gJChcIiNlZHVjYXRpb24tdGVtcGxhdGVcIikuaHRtbCgpXG4gICAgQGVkdWNhdGlvbl9zb3VyY2UgPSBIYW5kbGViYXJzLmNvbXBpbGUgQGVkdWNhdGlvbl9zb3VyY2VcbiAgICBAYWRkX2VkdWNhdGlvbi5vbiAnY2xpY2snLCBAbmV3RWR1Y2F0aW9uXG4gICAgQGFkZF9lZHVjYXRpb24udHJpZ2dlciAnY2xpY2snXG5cblxuICAgIEBzZXJ0aWZpY2F0X3NvdXJjZSA9ICQoXCIjc2VydGlmaWNhdC10ZW1wbGF0ZVwiKS5odG1sKClcbiAgICBAc2VydGlmaWNhdF9zb3VyY2UgPSBIYW5kbGViYXJzLmNvbXBpbGUgQHNlcnRpZmljYXRfc291cmNlXG4gICAgQGNlcnRfbGlzdCA9IEBzdGVwNC5maW5kICcuc2VydGlmaWNhdC1saXN0J1xuICAgIEBjZXJpZmljYXRlc19jb3VudCA9IDBcbiAgICBAc2VydGlmaWNhdHMgPSBAc3RlcDQuZmluZCAnLnNlcnRpZmljYXRzJ1xuICAgIEBzZXJ0aWZpY2F0cy5maWxlYXBpXG4gICAgICAjIHVybDogQGZvcm0uYXR0cignYWN0aW9uJyksXG4gICAgICB1cmw6ICdodHRwOi8vdGVzdC5zaWxlbnRpbXAuaW5mby90ZXN0LnBocCdcbiAgICAgIGR1cGxpY2F0ZTogZmFsc2UsXG4gICAgICBhY2NlcHQ6ICdpbWFnZS8qJyxcbiAgICAgIG1heFNpemU6IDUgKiBGaWxlQVBJLk1CLFxuICAgICAgYXV0b1VwbG9hZDogZmFsc2UsXG4gICAgICBtdWx0aXBsZTogdHJ1ZSxcbiAgICAgIG9uU2VsZWN0OiAoZXZ0LCB1aSk9PlxuICAgICAgICBAY2VyaWZpY2F0ZXNfY291bnQrK1xuICAgICAgICByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZXZlbnQpPT5cbiAgICAgICAgICBAY2VydF9saXN0LmFwcGVuZCBAc2VydGlmaWNhdF9zb3VyY2VcbiAgICAgICAgICAgIFwiaWRcIiA6IEBjZXJpZmljYXRlc19jb3VudFxuICAgICAgICAgICAgXCJzcmNcIiA6IGV2ZW50LnRhcmdldC5yZXN1bHRcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwgdWkuZmlsZXNbMF1cbiAgICAgIGVsZW1lbnRzOlxuICAgICAgICBjdHJsOlxuICAgICAgICAgIHVwbG9hZDogJy5hZGQtc2VydGlmaWNhdCBsYWJlbCdcbiAgICAgICAgbGlzdDogJy5zZXJ0aWZpY2F0LWxpc3QnXG5cbiAgICBAc3RlcDQuZmluZCgnYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKS5vbiAnY2xpY2snLCBAc3RlcDRTdWJtaXRcbiAgICBAc3RlcDQuZmluZCgnYS5wcmV2aW91cycpLm9uICdjbGljaycsIEBzdGVwNEJhY2tcblxuXG4gICMg0JTQvtCx0LDQstC40YLRjCDQvdC+0LLRi9C5INCw0LTRgNC10YFcbiAgbmV3RWR1Y2F0aW9uOiAoZXZlbnQpPT5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgQGFkZF9lZHVjYXRpb24uYmVmb3JlIEBlZHVjYXRpb25fc291cmNlKHsnaW5kZXgnIDogQGVkdWNhdGlvbl9jb3VudH0pXG4gICAgQGVkdWNhdGlvbl9jb3VudCsrXG4gICAgQHN0ZXA0LmZpbmQoJ3NlbGVjdDp2aXNpYmxlJykuY2hvc2VuXG4gICAgICBkaXNhYmxlX3NlYXJjaF90aHJlc2hvbGQ6IDMwXG5cbiAgc3RlcDRTdWJtaXQ6IChldmVudCk9PlxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpbnB1dHMgPSBAc3RlcDQuZmluZCgnOmlucHV0JylcbiAgICBmb3IgaW5wdXQgaW4gaW5wdXRzXG4gICAgICBpZiAhQHZhbGlkYXRlKGlucHV0KVxuICAgICAgICByZXR1cm4gZmFsc2VcblxuICAgIGlmIEBzdGVwNC5maW5kKCcudWktc3RhdGUtZXJyb3InKS5sZW5ndGg+MFxuICAgICAgcmV0dXJuIGZhbHNlXG5cbiAgICBAY3VycmVudCA9IEBjdXJyZW50LnJlbW92ZUNsYXNzKCdjdXJyZW50JykubmV4dCgpXG4gICAgQGN1cnJlbnQuYWRkQ2xhc3MoJ2N1cnJlbnQnKVxuXG5cbiAgc3RlcDRCYWNrOiAoZXZlbnQpPT5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgQHN0ZXBzLmZpbmQoJy5zZWxlY3RlZC5zdGVwOmxhc3QnKS5yZW1vdmVDbGFzcyAnc2VsZWN0ZWQnXG4gICAgQGN1cnJlbnQgPSBAY3VycmVudC5yZW1vdmVDbGFzcygnY3VycmVudCcpLnByZXYoKVxuICAgIEBjdXJyZW50LmFkZENsYXNzKCdjdXJyZW50JylcblxuICBzdGVwM1N1Ym1pdDogKGV2ZW50KT0+XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlucHV0cyA9IEBzdGVwMy5maW5kKCc6aW5wdXQnKVxuICAgIGZvciBpbnB1dCBpbiBpbnB1dHNcbiAgICAgIGlmICFAdmFsaWRhdGUoaW5wdXQpXG4gICAgICAgIHJldHVybiBmYWxzZVxuXG4gICAgaWYgQHN0ZXAzLmZpbmQoJy51aS1zdGF0ZS1lcnJvcicpLmxlbmd0aD4wXG4gICAgICByZXR1cm4gZmFsc2VcblxuICAgIEBzdGVwcy5maW5kKCcuc2VsZWN0ZWQuc3RlcDpsYXN0JykubmV4dCgpLmFkZENsYXNzICdzZWxlY3RlZCdcbiAgICBAY3VycmVudCA9IEBjdXJyZW50LnJlbW92ZUNsYXNzKCdjdXJyZW50JykubmV4dCgpXG4gICAgQGN1cnJlbnQuYWRkQ2xhc3MoJ2N1cnJlbnQnKVxuXG5cbiAgc3RlcDNCYWNrOiAoZXZlbnQpPT5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgQHN0ZXBzLmZpbmQoJy5zZWxlY3RlZC5zdGVwOmxhc3QnKS5yZW1vdmVDbGFzcyAnc2VsZWN0ZWQnXG4gICAgQGN1cnJlbnQgPSBAY3VycmVudC5yZW1vdmVDbGFzcygnY3VycmVudCcpLnByZXYoKVxuICAgIEBjdXJyZW50LmFkZENsYXNzKCdjdXJyZW50JylcblxuICAjINCU0L7QsdCw0LLQuNGC0Ywg0L3QvtCy0YvQuSDQsNC00YDQtdGBXG4gIG5ld0FkZHJlc3M6IChldmVudCk9PlxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBAYWRkX2FkZHJlc3MuYmVmb3JlIEBhZGRyZXNzX3NvdXJjZSh7J2luZGV4JyA6IEBhZGRyZXNzX2NvdW50fSlcbiAgICBAYWRkcmVzc19jb3VudCsrXG4gICAgQHN0ZXAzLmZpbmQoJ3NlbGVjdDp2aXNpYmxlJykuY2hvc2VuXG4gICAgICBkaXNhYmxlX3NlYXJjaF90aHJlc2hvbGQ6IDMwXG5cbiAgc3RlcDJTdWJtaXQ6IChldmVudCk9PlxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpbnB1dHMgPSBAc3RlcDIuZmluZCgnOmlucHV0JylcbiAgICBmb3IgaW5wdXQgaW4gaW5wdXRzXG4gICAgICBpZiAhQHZhbGlkYXRlKGlucHV0KVxuICAgICAgICByZXR1cm4gZmFsc2VcblxuICAgIGlmIEBzdGVwMi5maW5kKCcudWktc3RhdGUtZXJyb3InKS5sZW5ndGg+MFxuICAgICAgcmV0dXJuIGZhbHNlXG5cbiAgICBAc3RlcHMuZmluZCgnLnNlbGVjdGVkLnN0ZXA6bGFzdCcpLm5leHQoKS5hZGRDbGFzcyAnc2VsZWN0ZWQnXG4gICAgQGN1cnJlbnQgPSBAY3VycmVudC5yZW1vdmVDbGFzcygnY3VycmVudCcpLm5leHQoKVxuICAgIEBjdXJyZW50LmFkZENsYXNzKCdjdXJyZW50JylcblxuXG4gIHN0ZXAyQmFjazogKGV2ZW50KT0+XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIEBzdGVwcy5maW5kKCcuc2VsZWN0ZWQuc3RlcDpsYXN0JykucmVtb3ZlQ2xhc3MgJ3NlbGVjdGVkJ1xuICAgIEBjdXJyZW50ID0gQGN1cnJlbnQucmVtb3ZlQ2xhc3MoJ2N1cnJlbnQnKS5wcmV2KClcbiAgICBAY3VycmVudC5hZGRDbGFzcygnY3VycmVudCcpXG5cblxuICAjINCR0LvQvtC60LjRgNC+0LLQsNGC0Ywg0YbQtdC90Ysg0L3QtdC00L7Qv9GD0YHRgtC40LzRi9GFINGE0L7RgNC80LDRgtC+0LIg0LfQsNC90Y/RgtC40LlcbiAgY2hlY2tGb3JtYXQ6ID0+XG4gICAgaW5wdXRzID0gQGZvcm1hdHMuZmluZCAnaW5wdXQnXG4gICAgZm9yIGlucHV0IGluIGlucHV0c1xuICAgICAgZWxlbWVudHMgPSBAc3RlcDIuZmluZCgnaW5wdXQuJytpbnB1dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcHJpY2UtZmllbGQnKSlcbiAgICAgIGZvciBlbGVtZW50IGluIGVsZW1lbnRzXG4gICAgICAgIHByaWNlID0gJChlbGVtZW50KS5jbG9zZXN0KCcuc3ViZGV2aXNpb24nKVxuICAgICAgICBpZiBpbnB1dC5jaGVja2VkXG4gICAgICAgICAgcHJpY2UucmVtb3ZlQ2xhc3MoJ2hpZGUnKVxuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpXG4gICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3JlcXVpcmVkJywgJ3JlcXVpcmVkJylcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHByaWNlLmFkZENsYXNzKCdoaWRlJylcbiAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3VpLXN0YXRlLWVycm9yJylcbiAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKVxuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdyZXF1aXJlZCcpXG5cbiAgIyDQlNC+0LHQsNCy0LjRgtGMINC90L7QstGL0Lkg0L/RgNC10LTQvNC10YJcbiAgbmV3U3ViamVjdDogKGV2ZW50KT0+XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIEBhZGRfc3ViamVjdC5iZWZvcmUgQHN1YmplY3Rfc291cmNlKHsnaW5kZXgnIDogQHN1YmpfY291bnR9KVxuICAgIEBzdWJqX2NvdW50KytcbiAgICBAc3RlcDIuZmluZCgnc2VsZWN0OnZpc2libGUnKS5jaG9zZW5cbiAgICAgIGRpc2FibGVfc2VhcmNoX3RocmVzaG9sZDogMzBcbiAgICBAc3RlcDIuZmluZCgnLm1pbi10aW1lJykudGV4dCBAZHVyYXRpb25fdmFsdWUudmFsKClcbiAgICBAY2hlY2tGb3JtYXQoKVxuICAgIGZvciBlbGVtZW50IGluIEBzdGVwMi5maW5kKCcuZHJvcGRvd24tY29udGFpbmVyLXdpZGdldCcpXG4gICAgICBuZXcgRHJvcGRvd25XaWRnZXRDb250cm9sbGVyKCQoZWxlbWVudCkpXG5cbiAgIyDQn9GA0L7QstC10YDQutCwINC/0L7Qu9C10Lkg0LHQu9C+0LrQvtCyINC90LAg0LLQsNC70LjQtNC90L7RgdGC0YxcbiAgdmFsaWRhdGU6IChpbnB1dCk9PlxuXG4gICAgaWYgaW5wdXQuaGFzQXR0cmlidXRlICdkYXRhLWg1LWVycm9yaWQnXG4gICAgICBlcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkIGlucHV0LmdldEF0dHJpYnV0ZSgnZGF0YS1oNS1lcnJvcmlkJylcblxuICAgIGlmIGlucHV0Lmhhc0F0dHJpYnV0ZSgncmVxdWlyZWQnKVxuICAgICAgaWYgaW5wdXQudmFsdWUudHJpbSgpLmxlbmd0aCA9PSAwXG4gICAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQgJ3VpLXN0YXRlLWVycm9yJ1xuXG4gICAgaWYgaW5wdXQuY2xhc3NMaXN0LmNvbnRhaW5zICd1aS1zdGF0ZS1lcnJvcidcbiAgICAgIGlmIGVycm9yXG4gICAgICAgIGVycm9yLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICBlbHNlXG4gICAgICBpZiBlcnJvclxuICAgICAgICBlcnJvci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG5cbiAgICByZXR1cm4gdHJ1ZVxuXG4gICMg0J/QtdGA0LXRhdC+0LQg0LrQviDQstGC0L7RgNC+0LzRgyDRiNCw0LPRgyDRgNC10LPQuNGB0YLRgNCw0YbQuNC4XG4gIHN0ZXAxU3VibWl0OiAoZXZlbnQpPT5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaW5wdXRzID0gQHN0ZXAxLmZpbmQoJzppbnB1dCcpXG4gICAgZm9yIGlucHV0IGluIGlucHV0c1xuICAgICAgaWYgIUB2YWxpZGF0ZShpbnB1dClcbiAgICAgICAgcmV0dXJuIGZhbHNlXG5cbiAgICBpZiBAc3RlcDEuZmluZCgnLnVpLXN0YXRlLWVycm9yJykubGVuZ3RoPjBcbiAgICAgIHJldHVybiBmYWxzZVxuXG4gICAgQHN0ZXBzLmZpbmQoJy5zZWxlY3RlZC5zdGVwOmxhc3QnKS5uZXh0KCkuYWRkQ2xhc3MgJ3NlbGVjdGVkJ1xuICAgIEBjdXJyZW50ID0gQGN1cnJlbnQucmVtb3ZlQ2xhc3MoJ2N1cnJlbnQnKS5uZXh0KClcbiAgICBAY3VycmVudC5hZGRDbGFzcygnY3VycmVudCcpXG5cblxuXG4gICMgICBsb2NhdGlvbnMgPSBuZXcgQmxvb2Rob3VuZFxuICAjICAgICBkYXR1bVRva2VuaXplcjogQmxvb2Rob3VuZC50b2tlbml6ZXJzLm9iai53aGl0ZXNwYWNlKFwiY2l0eVwiKSxcbiAgIyAgICAgcXVlcnlUb2tlbml6ZXI6IEJsb29kaG91bmQudG9rZW5pemVycy53aGl0ZXNwYWNlLFxuICAjICAgICBwcmVmZXRjaDogXCJodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vdS8yMDgxMDc3Mi9jaXR5cy5qc29uXCJcbiAgICBcbiAgIyAgIGxvY2F0aW9ucy5pbml0aWFsaXplKClcblxuICAjICAgJCgnI2NpdHknKS50eXBlYWhlYWRcbiAgIyAgICAgaGludDogdHJ1ZVxuICAjICAgICBoaWdobGlnaHQ6IHRydWVcbiAgIyAgICAgbWluTGVuZ3RoOiAxXG4gICMgICAsXG4gICMgICAgIG5hbWU6ICdsb2NhdGlvbnMnXG4gICMgICAgIGRpc3BsYXlLZXk6ICdjaXR5JyxcbiAgIyAgICAgc291cmNlOiBsb2NhdGlvbnMudHRBZGFwdGVyKClcbiAgIyAgICAgdGVtcGxhdGVzOlxuICAjICAgICAgIHN1Z2dlc3Rpb246IEhhbmRsZWJhcnMuY29tcGlsZSgnPHA+PGI+e3tyZWdpb259fTwvYj57e2NpdHl9fTwvcD4nKVxuXG4gICMgICB1bml2ZXJjaXR5cyA9IG5ldyBCbG9vZGhvdW5kXG4gICMgICAgIGRhdHVtVG9rZW5pemVyOiAoZGF0YSktPlxuICAjICAgICAgIHJldHVybiBCbG9vZGhvdW5kLnRva2VuaXplcnMud2hpdGVzcGFjZShkYXRhLnRpdGxlKVxuICAjICAgICBxdWVyeVRva2VuaXplcjogQmxvb2Rob3VuZC50b2tlbml6ZXJzLndoaXRlc3BhY2UsXG4gICMgICAgIGxvY2FsOiBbe1widGl0bGVcIjpcIkFuZG9ycmFcIn0se1widGl0bGVcIjpcIlVuaXRlZEFyYWJFbWlyYXRlc1wifSx7XCJ0aXRsZVwiOlwiQWZnaGFuaXN0YW5cIn0se1widGl0bGVcIjpcIkFudGlndWFhbmRCYXJidWRhXCJ9LHtcInRpdGxlXCI6XCJBbmd1aWxsYVwifSx7XCJ0aXRsZVwiOlwiQWxiYW5pYVwifSx7XCJ0aXRsZVwiOlwiQXJtZW5pYVwifSx7XCJ0aXRsZVwiOlwiQW5nb2xhXCJ9LHtcInRpdGxlXCI6XCJBbnRhcmN0aWNhXCJ9XVxuXG4gICMgICB1bml2ZXJjaXR5cy5pbml0aWFsaXplKClcblxuICAjICAgJCgnI3VuaXZlcmNpdHknKS50eXBlYWhlYWRcbiAgIyAgICAgaGludDogdHJ1ZVxuICAjICAgICBoaWdobGlnaHQ6IHRydWVcbiAgIyAgICAgbWluTGVuZ3RoOiAxXG4gICMgICAsXG4gICMgICAgIG5hbWU6ICd1bml2ZXJjaXR5cydcbiAgIyAgICAgZGlzcGxheUtleTogJ3RpdGxlJyxcbiAgIyAgICAgc291cmNlOiB1bml2ZXJjaXR5cy50dEFkYXB0ZXIoKVxuICAjICAgICB0ZW1wbGF0ZXM6XG4gICMgICAgICAgc3VnZ2VzdGlvbjogSGFuZGxlYmFycy5jb21waWxlKCc8cD57e3RpdGxlfX08L3A+JylcblxuXG4gICMgYWZ0ZXJDaGVjazogKGV2ZW50KT0+XG4gICAgXG4gICMgICBpZiBAZm9ybS5maW5kKCdpbnB1dC51aS1zdGF0ZS1lcnJvciwgc2VsZWN0LnVpLXN0YXRlLWVycm9yLCB0ZXh0YXJlYS51aS1zdGF0ZS1lcnJvcicpLmxlbmd0aCA+IDBcbiAgIyAgICAgcmV0dXJuIGZhbHNlXG5cbiAgIyAgIGRyb3BfZG93bl9lcnIgPSBmYWxzZVxuXG4gICMgICBmb3IgaW5wdXQgaW4gQGZvcm0uZmluZCgnLmRyb3Bkb3duLXdpZGdldCcpXG4gICMgICAgIGlmICFpbnB1dC5jb250cm9sbGVyLnZhbGlkYXRlKClcbiAgIyAgICAgICBkcm9wX2Rvd25fZXJyID0gdHJ1ZVxuXG4gICMgICBpZiBkcm9wX2Rvd25fZXJyXG4gICMgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgIyAgICAgcmV0dXJuIGZhbHNlXG5cblxuICAjINCo0LDQsyAxXG5cbiAgIyDQkNCy0LDRgtCw0YBcbiAgZHJvcGVkOiAoZXZlbnQpLT5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgRmlsZUFQSS5nZXREcm9wRmlsZXMgZXZlbnQsIChmaWxlcyktPlxuXG4gIG92ZXI6IChvdmVyKS0+XG5cblxuICBkcm9wOiAoZmlsZXMpPT5cbiAgICBjb25zb2xlLmxvZyAgZmlsZXNcbiAgICBpZiBmaWxlcy5sZW5ndGhcbiAgICAgIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgICAgIFxuICAgICAgcmVhZGVyLm9ubG9hZCA9IChldmVudCk9PlxuICAgICAgICBAYXZhdGFyVGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yKCdpbWcnKS5zcmMgPSBldmVudC50YXJnZXQucmVzdWx0XG4gICAgICAgIGF2YXRhciA9IGRvY3VtZW50LmltcG9ydE5vZGUgQGF2YXRhclRlbXBsYXRlLmNvbnRlbnQsIHRydWVcbiAgICAgICAgcHJldiA9IEBmaWxlU2VsZWN0b3IucHJldigpXG4gICAgICAgIGlmIHByZXYuaGFzQ2xhc3MoJ2N1cnJlbnQtYXZhdGFyJylcbiAgICAgICAgICBwcmV2LnJlbW92ZSgpXG4gICAgICAgIEBmaWxlU2VsZWN0b3IuYmVmb3JlIGF2YXRhclxuICAgICAgICBAZmlsZVNlbGVjdG9yLnByZXYoKS5maW5kKCcuY2xvc2UnKS5vbiAnY2xpY2snLCBAcmVtb3ZlQXZhdGFyXG4gICAgICBcbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMIGZpbGVzWzBdXG5cbiAgcmVtb3ZlQXZhdGFyOiAoZXZlbnQpPT5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgQGZpbGVTZWxlY3Rvci5wcmV2KCkucmVtb3ZlKClcbiAgICBAZmlsZS5yZXBsYWNlV2l0aCBAZmlsZS52YWwoJycpLmNsb25lKHRydWUpXG4gICAgQGZpbGUgPSBAc3RlcDEuZmluZCAnI3JlZ2lzdHJhdGlvbi1hdmF0YXInXG5cbiAgYXZhdGFyU2VsZWN0ZWQ6IChldmVudCk9PlxuICAgIGZpbGVzID0gRmlsZUFQSS5nZXRGaWxlcyhldmVudClcblxuICAgIGV4dCA9IGZpbGVzWzBdWyduYW1lJ10uc3Vic3RyaW5nKGZpbGVzWzBdWyduYW1lJ10ubGFzdEluZGV4T2YoJy4nKSArIDEpLnRvTG93ZXJDYXNlKClcblxuICAgIGlmIChmaWxlc1swXSAmJiAoZmlsZXNbMF0uc2l6ZSA8PSBGaWxlQVBJLk1CKSAmJiAoZXh0ID09IFwiZ2lmXCIgfHwgZXh0ID09IFwicG5nXCIgfHwgZXh0ID09IFwianBlZ1wiIHx8IGV4dCA9PSBcImpwZ1wiKSlcbiAgICAgICAgXG4gICAgICByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gICAgICByZWFkZXIub25sb2FkID0gKGV2ZW50KT0+XG4gICAgICAgIFxuICAgICAgICBAYXZhdGFyVGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yKCdpbWcnKS5zcmMgPSBldmVudC50YXJnZXQucmVzdWx0XG4gICAgICAgIGF2YXRhciA9IGRvY3VtZW50LmltcG9ydE5vZGUgQGF2YXRhclRlbXBsYXRlLmNvbnRlbnQsIHRydWVcbiAgICAgICAgcHJldiA9IEBmaWxlU2VsZWN0b3IucHJldigpXG4gICAgICAgIGlmIHByZXYuaGFzQ2xhc3MoJ2N1cnJlbnQtYXZhdGFyJylcbiAgICAgICAgICBwcmV2LnJlbW92ZSgpXG4gICAgICAgIEBmaWxlU2VsZWN0b3IuYmVmb3JlIGF2YXRhclxuICAgICAgICBAZmlsZVNlbGVjdG9yLnByZXYoKS5maW5kKCcuY2xvc2UnKS5vbiAnY2xpY2snLCBAcmVtb3ZlQXZhdGFyXG5cbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMIGZpbGVzWzBdXG5cbiAgICBlbHNlXG4gICAgICBAZmlsZVNlbGVjdG9yLnByZXYoKS5yZW1vdmUoKVxuICAgICAgQGZpbGUucmVwbGFjZVdpdGggQGZpbGUudmFsKCcnKS5jbG9uZSh0cnVlKVxuICAgICAgQGZpbGUgPSBAc3RlcDEuZmluZCAnI3JlZ2lzdHJhdGlvbi1hdmF0YXInXG5cbiAgIyDQlNCw0YLQsFxuICBjaGVja0RhdGU6IChldmVudCk9PlxuICAgIGRheSA9IHBhcnNlSW50IEBkYXkudmFsKCkudHJpbSgpLCAxMFxuICAgIFxuICAgIGlmIGRheTwxIHx8IGlzTmFOKGRheSlcbiAgICAgIEBkYXkudmFsIDFcbiAgICAgIHJldHVyblxuXG4gICAgZGF5cyA9IHBhcnNlSW50IG1vbWVudChAeWVhci52YWwoKStcIi1cIisocGFyc2VJbnQoQG1vbnRoLnZhbCgpLDEwKSsxKSwgXCJZWVlZLU1NXCIpLmRheXNJbk1vbnRoKCksIDEwXG4gICAgaWYgZGF5PmRheXNcbiAgICAgIEBkYXkudmFsIGRheXNcbiAgICByZXR1cm5cblxuICAgIGlmIGRheT4zMVxuICAgICAgQGRheS52YWwgMzFcblxuJChkb2N1bWVudCkucmVhZHkgLT5cbiAgbmV3IFBlcnNvbmFsRGF0YUFsbCgpIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9