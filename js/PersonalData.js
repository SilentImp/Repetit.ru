var PersonalData,__bind=function(e,t){return function(){return e.apply(t,arguments)}};PersonalData=function(){function e(){if(this.afterCheck=__bind(this.afterCheck,this),this.avatarSelected=__bind(this.avatarSelected,this),this.removeAvatar=__bind(this.removeAvatar,this),this.drop=__bind(this.drop,this),this.over=__bind(this.over,this),this.droped=__bind(this.droped,this),this.form=$("form.panel"),1!==this.form.length)throw{error:"не найдена форма"};this.file=this.form.find("#registration-avatar"),this.avatarTemplate=document.getElementById("current-avatar-template"),this.fileSelector=$(".file-selector"),FileAPI.event.on(document.getElementById("registration-avatar"),"change",this.avatarSelected),$(document).dnd(this.over,this.drop),FileAPI.event.on(document,"drop",this.droped)}return e.prototype.droped=function(e){return e.preventDefault(),console.log("droped",e),FileAPI.getDropFiles(e,function(e){return console.log("file: ",e)})},e.prototype.over=function(){},e.prototype.drop=function(e){var t;return console.log("drop",e.length,e),e.length&&(t=new FileReader,t.onload=function(e){return function(t){var r,o;return e.avatarTemplate.content.querySelector("img").src=t.target.result,r=document.importNode(e.avatarTemplate.content,!0),o=e.fileSelector.prev(),o.hasClass("current-avatar")&&o.remove(),e.fileSelector.before(r),e.fileSelector.prev().find(".close").on("click",e.removeAvatar)}}(this),t.readAsDataURL(e[0])),this.form.h5Validate(),this.form.on("submit",this.afterCheck)},e.prototype.removeAvatar=function(e){return e.preventDefault(),this.fileSelector.prev().remove(),this.file.replaceWith(this.file.val("").clone(!0)),this.file=this.form.find("#registration-avatar")},e.prototype.avatarSelected=function(e){var t,r,o;return r=FileAPI.getFiles(e),t=r[0].name.substring(r[0].name.lastIndexOf(".")+1).toLowerCase(),!r[0]||"gif"!==t&&"png"!==t&&"jpeg"!==t&&"jpg"!==t?void 0:(o=new FileReader,o.onload=function(e){return function(t){var r,o;return e.avatarTemplate.content.querySelector("img").src=t.target.result,r=document.importNode(e.avatarTemplate.content,!0),o=e.fileSelector.prev(),o.hasClass("current-avatar")&&o.remove(),e.fileSelector.before(r),e.fileSelector.prev().find(".close").on("click",e.removeAvatar)}}(this),o.readAsDataURL(r[0]))},e.prototype.afterCheck=function(e){var t,r,o,n,a;if(this.form.find("input.ui-state-error, select.ui-state-error, textarea.ui-state-error").length>0)return!1;for(t=!1,a=this.form.find(".dropdown-widget"),o=0,n=a.length;n>o;o++)r=a[o],r.controller.validate()||(console.log("ошибка"),t=!0);return t?(e.preventDefault(),!1):void 0},e}(),$(document).ready(function(){return new PersonalData});
//# sourceMappingURL=data:application/json;base64,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QUFBLEVBQUEsQ0FBQSxJQUFHLEtBQUMsS0FBSyxLQUFLLHdFQUF3RSxPQUFTLEVBQzdGLE9BQU8sQ0FHVCxLQURBLEdBQWdCLEVBQ2hCLEVBQUEsS0FBQSxLQUFBLEtBQUEsb0JBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxXQUNLLEVBQU8sV0FBVyxhQUNuQixRQUFRLElBQUksVUFDWixHQUFnQixFQUVwQixPQUFHLElBQ0QsRUFBTSxrQkFDQyxHQUZULGFBNUhKLEVBaUlFLFVBQVUsTUFBTSxpQkFDWixJQUFBIiwiZmlsZSI6IlBlcnNvbmFsRGF0YS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFBlcnNvbmFsRGF0YVxuICBjb25zdHJ1Y3RvcjogLT5cbiAgICBAZm9ybSA9ICQgJ2Zvcm0ucGFuZWwnXG4gICAgaWYgQGZvcm0ubGVuZ3RoICE9IDFcbiAgICAgIHRocm93IHtlcnJvcjogJ9C90LUg0L3QsNC50LTQtdC90LAg0YTQvtGA0LzQsCd9XG5cbiAgICBAZmlsZSA9IEBmb3JtLmZpbmQgJyNyZWdpc3RyYXRpb24tYXZhdGFyJ1xuICAgICMgQGZpbGUub24gJ2NoYW5nZScsIEBhdmF0YXJTZWxlY3RlZFxuICAgIEBhdmF0YXJUZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkICdjdXJyZW50LWF2YXRhci10ZW1wbGF0ZSdcbiAgICBAZmlsZVNlbGVjdG9yID0gJCAnLmZpbGUtc2VsZWN0b3InXG5cbiAgICBGaWxlQVBJLmV2ZW50Lm9uIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWdpc3RyYXRpb24tYXZhdGFyJyksICdjaGFuZ2UnLCBAYXZhdGFyU2VsZWN0ZWRcbiAgICAkKGRvY3VtZW50KS5kbmQgQG92ZXIsIEBkcm9wXG5cbiAgICBGaWxlQVBJLmV2ZW50Lm9uIGRvY3VtZW50LCAnZHJvcCcsIEBkcm9wZWRcbiAgXG5cbiAgZHJvcGVkOiAoZXZlbnQpPT5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc29sZS5sb2cgJ2Ryb3BlZCcsIGV2ZW50XG4gICAgRmlsZUFQSS5nZXREcm9wRmlsZXMgZXZlbnQsIChmaWxlcyktPlxuICAgICAgY29uc29sZS5sb2cgJ2ZpbGU6ICcsIGZpbGVzXG5cbiAgb3ZlcjogKG92ZXIpPT5cblxuXG4gIGRyb3A6IChmaWxlcyk9PlxuICAgIGNvbnNvbGUubG9nICdkcm9wJywgZmlsZXMubGVuZ3RoLCBmaWxlc1xuICAgIGlmIGZpbGVzLmxlbmd0aFxuICAgICAgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgICAgXG4gICAgICByZWFkZXIub25sb2FkID0gKGV2ZW50KT0+XG4gICAgICAgIEBhdmF0YXJUZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ2ltZycpLnNyYyA9IGV2ZW50LnRhcmdldC5yZXN1bHRcbiAgICAgICAgYXZhdGFyID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSBAYXZhdGFyVGVtcGxhdGUuY29udGVudCwgdHJ1ZVxuICAgICAgICBwcmV2ID0gQGZpbGVTZWxlY3Rvci5wcmV2KClcbiAgICAgICAgaWYgcHJldi5oYXNDbGFzcygnY3VycmVudC1hdmF0YXInKVxuICAgICAgICAgIHByZXYucmVtb3ZlKClcbiAgICAgICAgQGZpbGVTZWxlY3Rvci5iZWZvcmUgYXZhdGFyXG4gICAgICAgIEBmaWxlU2VsZWN0b3IucHJldigpLmZpbmQoJy5jbG9zZScpLm9uICdjbGljaycsIEByZW1vdmVBdmF0YXJcbiAgICAgIFxuICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwgZmlsZXNbMF1cblxuXG4gICAgICAjIEZpbGVBUEkuZ2V0RHJvcEZpbGVzIGV2ZW50LCAoZmlsZXMpPT5cbiAgICAgICMgICBjb25zb2xlLmxvZyBmaWxlc1swXVxuICAgICAgIyAgIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgICAgICAgXG4gICAgICAjICAgcmVhZGVyLm9ubG9hZCA9IChldmVudCk9PlxuICAgICAgIyAgICAgQGF2YXRhclRlbXBsYXRlLmNvbnRlbnQucXVlcnlTZWxlY3RvcignaW1nJykuc3JjID0gZXZlbnQudGFyZ2V0LnJlc3VsdFxuICAgICAgIyAgICAgYXZhdGFyID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSBAYXZhdGFyVGVtcGxhdGUuY29udGVudCwgdHJ1ZVxuICAgICAgIyAgICAgcHJldiA9IEBmaWxlU2VsZWN0b3IucHJldigpXG4gICAgICAjICAgICBpZiBwcmV2Lmhhc0NsYXNzKCdjdXJyZW50LWF2YXRhcicpXG4gICAgICAjICAgICAgIHByZXYucmVtb3ZlKClcbiAgICAgICMgICAgIEBmaWxlU2VsZWN0b3IuYmVmb3JlIGF2YXRhclxuICAgICAgIyAgICAgQGZpbGVTZWxlY3Rvci5wcmV2KCkuZmluZCgnLmNsb3NlJykub24gJ2NsaWNrJywgQHJlbW92ZUF2YXRhclxuICAgICAgICBcbiAgICAgICMgICByZWFkZXIucmVhZEFzRGF0YVVSTCBAZmlsZVswXS5maWxlc1swXVxuXG4gICAgQGZvcm0uaDVWYWxpZGF0ZSgpXG4gICAgQGZvcm0ub24gJ3N1Ym1pdCcsIEBhZnRlckNoZWNrXG5cbiAgICAjIERyb3B6b25lLmF1dG9EaXNjb3ZlciA9IGZhbHNlXG5cbiAgICAjIEBteURyb3B6b25lID0gbmV3IERyb3B6b25lIGRvY3VtZW50LmJvZHksXG4gICAgIyAgIHVybDogQGZvcm0uYXR0cihcImFjdGlvblwiKVxuICAgICMgICBjbGlja2FibGU6IFwiLmZpbGUtc2VsZWN0b3JcIlxuICAgICMgICBwYXJhbU5hbWU6IFwiYXZhdGFyXCJcbiAgICAjICAgdXBsb2FkTXVsdGlwbGU6IGZhbHNlXG4gICAgIyAgIGF1dG9Qcm9jZXNzUXVldWU6IGZhbHNlXG4gICAgIyAgIG1heEZpbGVzOiAxXG4gICAgIyAgIHBhcmFsbGVsVXBsb2FkczogMVxuXG5cbiAgICAjICQoXCIuZmlsZS1zZWxlY3RvclwiKS5kcm9wem9uZVxuICAgICMgICB1cmw6IEBmb3JtLmF0dHIoJ2FjdGlvbicpXG4gICAgIyAgIHBhcmFtTmFtZTogXCJhdmF0YXJcIlxuICAgICMgICB0aHVtYm5haWxXaWR0aDogMTc0XG4gICAgIyAgIHByZXZpZXdUZW1wbGF0ZTogQGF2YXRhclRlbXBsYXRlLmlubmVySFRNTFxuXG4gICAgIyBAbXlEcm9wem9uZS5vbiAnYWRkZWRmaWxlJywgKGZpbGUpLT5cbiAgICAjICAgY29uc29sZS5sb2cgYXJndW1lbnRzXG5cbiAgICAjIEBteURyb3B6b25lLm9uICdlcnJvcicsIChtZXNzYWdlKS0+XG4gICAgIyAgIGNvbnNvbGUubG9nIG1lc3NhZ2VcblxuXG5cbiAgcmVtb3ZlQXZhdGFyOiAoZXZlbnQpPT5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgQGZpbGVTZWxlY3Rvci5wcmV2KCkucmVtb3ZlKClcbiAgICBAZmlsZS5yZXBsYWNlV2l0aCBAZmlsZS52YWwoJycpLmNsb25lKHRydWUpXG4gICAgQGZpbGUgPSBAZm9ybS5maW5kICcjcmVnaXN0cmF0aW9uLWF2YXRhcidcblxuICBhdmF0YXJTZWxlY3RlZDogKGV2ZW50KT0+XG4gICAgZmlsZXMgPSBGaWxlQVBJLmdldEZpbGVzKGV2ZW50KVxuXG4gICAgZXh0ID0gZmlsZXNbMF1bJ25hbWUnXS5zdWJzdHJpbmcoZmlsZXNbMF1bJ25hbWUnXS5sYXN0SW5kZXhPZignLicpICsgMSkudG9Mb3dlckNhc2UoKVxuICAgIGlmIChmaWxlc1swXSAmJiAoZXh0ID09IFwiZ2lmXCIgfHwgZXh0ID09IFwicG5nXCIgfHwgZXh0ID09IFwianBlZ1wiIHx8IGV4dCA9PSBcImpwZ1wiKSlcbiAgICAgICAgXG4gICAgICByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gICAgICByZWFkZXIub25sb2FkID0gKGV2ZW50KT0+XG4gICAgICAgIFxuICAgICAgICBAYXZhdGFyVGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yKCdpbWcnKS5zcmMgPSBldmVudC50YXJnZXQucmVzdWx0XG4gICAgICAgIGF2YXRhciA9IGRvY3VtZW50LmltcG9ydE5vZGUgQGF2YXRhclRlbXBsYXRlLmNvbnRlbnQsIHRydWVcbiAgICAgICAgcHJldiA9IEBmaWxlU2VsZWN0b3IucHJldigpXG4gICAgICAgIGlmIHByZXYuaGFzQ2xhc3MoJ2N1cnJlbnQtYXZhdGFyJylcbiAgICAgICAgICBwcmV2LnJlbW92ZSgpXG4gICAgICAgIEBmaWxlU2VsZWN0b3IuYmVmb3JlIGF2YXRhclxuICAgICAgICBAZmlsZVNlbGVjdG9yLnByZXYoKS5maW5kKCcuY2xvc2UnKS5vbiAnY2xpY2snLCBAcmVtb3ZlQXZhdGFyXG5cbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMIGZpbGVzWzBdXG5cblxuICBhZnRlckNoZWNrOiAoZXZlbnQpPT5cbiAgICBcbiAgICBpZiBAZm9ybS5maW5kKCdpbnB1dC51aS1zdGF0ZS1lcnJvciwgc2VsZWN0LnVpLXN0YXRlLWVycm9yLCB0ZXh0YXJlYS51aS1zdGF0ZS1lcnJvcicpLmxlbmd0aCA+IDBcbiAgICAgIHJldHVybiBmYWxzZVxuXG4gICAgZHJvcF9kb3duX2VyciA9IGZhbHNlXG4gICAgZm9yIGlucHV0IGluIEBmb3JtLmZpbmQoJy5kcm9wZG93bi13aWRnZXQnKVxuICAgICAgaWYgIWlucHV0LmNvbnRyb2xsZXIudmFsaWRhdGUoKVxuICAgICAgICBjb25zb2xlLmxvZyAn0L7RiNC40LHQutCwJ1xuICAgICAgICBkcm9wX2Rvd25fZXJyID0gdHJ1ZVxuXG4gICAgaWYgZHJvcF9kb3duX2VyclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgcmV0dXJuIGZhbHNlXG5cblxuJChkb2N1bWVudCkucmVhZHkgLT5cbiAgbmV3IFBlcnNvbmFsRGF0YSgpIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9